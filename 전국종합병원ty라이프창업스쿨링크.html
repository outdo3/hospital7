<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>전국 종합병원 안내 (상급종합 제외, 내장 데이터)</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Apple SD Gothic Neo','Noto Sans KR',sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height:100vh; padding:20px;
    }
    .container {
      max-width: 1400px; margin:0 auto; background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px); border-radius:20px; box-shadow:0 20px 40px rgba(0,0,0,.1); overflow:hidden;
    }
    .header {
      position: relative; /* CTA 절대배치용 */
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      padding: 40px; text-align:center; color:#fff;
    }
    .header h1 { font-size:2.2rem; font-weight:700; margin-bottom:10px; text-shadow: 2px 2px 4px rgba(0,0,0,.3); }
    .header p { font-size:1.05rem; opacity:.95; }
    .stats { margin-top:8px; font-size:.92rem; opacity:.95; }

    /* ✅ 추가: 헤더 우하단 CTA 버튼 */
    .cta-btn {
      position:absolute; right:24px; bottom:24px;
      display:inline-flex; align-items:center; gap:8px;
      padding:12px 18px; border-radius:9999px; font-weight:800; font-size:.92rem;
      background: linear-gradient(135deg, #a78bfa 0%, #6366f1 100%);
      color:#fff; text-decoration:none;
      box-shadow:0 10px 20px rgba(0,0,0,.18); transition: transform .2s ease, box-shadow .2s ease, opacity .2s ease;
      white-space:nowrap;
    }
    .cta-btn:hover { transform: translateY(-2px); box-shadow:0 14px 28px rgba(0,0,0,.22); }
    .cta-btn:focus { outline: 3px solid rgba(99,102,241,.5); outline-offset:2px; }
    .cta-sub { font-weight:700; opacity:.95; }

    .filters { padding: 20px 20px 10px; background:#f8fafc; border-bottom:1px solid #e2e8f0; }
    .filter-buttons {
      display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-bottom:14px;
    }
    .filter-btn {
      padding:10px 18px; border:none; border-radius:25px; background:#fff; color:#475569; font-weight:600;
      cursor:pointer; transition: all .2s ease; box-shadow:0 4px 12px rgba(0,0,0,.1); font-size:.9rem;
    }
    .filter-btn:hover { transform: translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.15); }
    .filter-btn.active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:#fff; transform: translateY(-2px); }

    .toolbar {
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:center; padding: 0 10px 18px;
    }
    .search-box { max-width:420px; width:100%; position:relative; }
    .search-input {
      width:100%; padding: 14px 46px 14px 18px; border:2px solid #e2e8f0; border-radius:25px; font-size:1rem; outline:none;
      transition: border-color .2s ease;
    }
    .search-input:focus { border-color:#667eea; }
    .search-icon { position:absolute; right:16px; top:50%; transform:translateY(-50%); color:#94a3b8; }

    .hospitals-grid { padding: 24px; display:grid; grid-template-columns: repeat(auto-fill, minmax(400px, 1fr)); gap:18px; }
    .hospital-card {
      background:#fff; border-radius:15px; padding:22px; box-shadow:0 10px 25px rgba(0,0,0,.08);
      transition: all .2s ease; border-left:4px solid #667eea; position:relative; overflow:hidden;
    }
    .hospital-card::before {
      content:''; position:absolute; inset:0; background: linear-gradient(135deg, rgba(102,126,234,.05) 0%, rgba(118,75,162,.05) 100%);
      opacity:0; transition: opacity .2s ease;
    }
    .hospital-card:hover::before { opacity:1; }
    .hospital-card:hover { transform: translateY(-4px); box-shadow:0 15px 35px rgba(0,0,0,.15); }

    .hospital-name { font-size:1.25rem; font-weight:800; color:#1e293b; margin-bottom:10px; position:relative; z-index:1; }
    .hospital-info { margin-bottom:12px; position:relative; z-index:1; }
    .info-item { display:flex; align-items:flex-start; margin-bottom:8px; font-size:.95rem; }
    .info-icon { width:20px; margin-right:8px; color:#667eea; margin-top:2px; flex-shrink:0; }
    .info-text { color:#475569; line-height:1.5; }

    .hospital-actions { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px; margin-top:16px; position:relative; z-index:1; }
    .action-btn {
      padding:10px 12px; border:none; border-radius:10px; font-weight:700; cursor:pointer; transition: all .2s ease;
      text-decoration:none; text-align:center; font-size:.85rem; display:flex; align-items:center; justify-content:center; gap:6px; color:#fff;
    }
    .call-btn { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .website-btn { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }
    .map-btn { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .action-btn[disabled] { opacity:.5; cursor:not-allowed; box-shadow:none; }
    .action-btn:hover:not([disabled]) { transform: translateY(-2px); box-shadow:0 8px 20px rgba(0,0,0,.18); }

    .region-badge {
      position:absolute; top:12px; right:12px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color:#fff; padding:6px 10px; border-radius:14px; font-size:.78rem; font-weight:800; z-index:2;
    }

    .no-results { text-align:center; padding:60px 20px; color:#64748b; font-size:1.05rem; display:none; }
    .counts { text-align:center; color:#334155; padding:0 0 8px; font-size:.95rem; }

    @media (max-width: 768px) {
      .hospitals-grid { grid-template-columns:1fr; padding: 18px; }
      .filter-buttons { justify-content:center; }
      .filter-btn { font-size:.8rem; padding:10px 18px; }
      .header h1 { font-size:1.9rem; }
      .hospital-actions { grid-template-columns:1fr; gap:10px; }
      .action-btn { font-size:.95rem; padding:12px 18px; }
      /* ✅ 모바일에서는 CTA가 제목 아래 중앙으로 */
      .cta-btn {
        position: static;
        margin: 14px auto 0;
        display: inline-flex;
        max-width: 90%;
        white-space: normal;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>🏥 전국 종합병원 안내 (상급종합 제외)</h1>
      <p>지역 필터/검색/전화연결/네이버지도 연동 지원.</p>
      <div class="stats" id="stats"></div>

      <!-- ✅ 추가된 CTA 버튼 -->
      <a
        class="cta-btn"
        href="https://cafe.naver.com/flslwlxrrntjqj/1327"
        target="_blank"
        rel="noopener"
        aria-label="헬스케어로 부수입 만드는 방법! TY라이프창업스쿨 바로가기"
      >
        헬스케어로 부수입만드는방법! <span class="cta-sub">TY라이프창업스쿨</span>
      </a>
    </div>

    <div class="filters">
      <div class="filter-buttons" id="regionButtons">
        <button class="filter-btn active" data-region="all">🇰🇷 전체</button>
        <button class="filter-btn" data-region="서울">🏙️ 서울</button>
        <button class="filter-btn" data-region="경기">🏢 경기</button>
        <button class="filter-btn" data-region="인천">✈️ 인천</button>
        <button class="filter-btn" data-region="부산">🌊 부산</button>
        <button class="filter-btn" data-region="대구">🌸 대구</button>
        <button class="filter-btn" data-region="대전">🚄 대전</button>
        <button class="filter-btn" data-region="광주">🍃 광주</button>
        <button class="filter-btn" data-region="울산">⚙️ 울산</button>
        <button class="filter-btn" data-region="세종">🏛️ 세종</button>
        <button class="filter-btn" data-region="강원">⛰️ 강원</button>
        <button class="filter-btn" data-region="충북">🏞️ 충북</button>
        <button class="filter-btn" data-region="충남">🌾 충남</button>
        <button class="filter-btn" data-region="전북">🌿 전북</button>
        <button class="filter-btn" data-region="전남">🌊 전남</button>
        <button class="filter-btn" data-region="경북">🍁 경북</button>
        <button class="filter-btn" data-region="경남">🏔️ 경남</button>
        <button class="filter-btn" data-region="제주">🏝️ 제주</button>
      </div>

      <div class="toolbar">
        <div class="search-box">
          <input type="text" class="search-input" placeholder="병원명이나 주소로 검색하세요..." id="searchInput" />
          <span class="search-icon">🔍</span>
        </div>
      </div>
      <div class="counts" id="countsLine">총 0개 (상급종합 제외됨 0개)</div>
    </div>

    <div class="hospitals-grid" id="hospitalsGrid"></div>
    <div class="no-results" id="noResults">
      <h3>검색 결과가 없습니다</h3>
      <p>다른 검색어나 지역을 선택해보세요.</p>
    </div>
  </div>

  <script>
    // ─────────────────────────────────────────────────────────────
    // 제5기(2024~2026) 상급종합병원 47개 이름 (공백 제거 비교용)
    // ─────────────────────────────────────────────────────────────
    const TERTIARY_LIST = [
      "강북삼성병원","건국대학교병원","경희대학교병원","고려대학교의과대학부속구로병원","삼성서울병원","서울대학교병원",
      "연세대학교의과대학강남세브란스병원","연세대학교의과대학세브란스병원","이화여자대학교의과대학부속목동병원",
      "서울아산병원","중앙대학교병원","고려대학교의과대학부속병원(안암병원)","가톨릭대학교서울성모병원","한양대학교병원",
      "가톨릭대학교인천성모병원","순천향대학교부천병원","길병원","인하대학교병원",
      "가톨릭대학교성빈센트병원","고려대학교의과대학부속안산병원","분당서울대학교병원","아주대학교병원","한림대학교성심병원",
      "강릉아산병원","연세대학교원주세브란스기독병원",
      "충북대학교병원",
      "단국대학교병원","충남대학교병원","건양대학교병원",
      "원광대학교병원","전북대학교병원",
      "전남대학교병원","조선대학교병원","화순전남대학교병원",
      "경북대학교병원","계명대학교동산병원","대구가톨릭대학교병원","영남대학교병원","칠곡경북대학교병원",
      "고신대학교복음병원","동아대학교병원","부산대학교병원","양산부산대학교병원","인제대학교부산백병원","울산대학교병원",
      "경상국립대학교병원","삼성창원병원"
    ].map(n => n.replace(/\s+/g,''));

    const normalizeName = s => (s||'').replace(/\s+/g,'').replace(/[()\-·]/g,'');
    const isTertiary = name => TERTIARY_LIST.includes(normalizeName(name));
    const toTelDigits = s => (s||'').replace(/[^0-9]/g,'');
    const encodeMapQuery = h => encodeURIComponent(`${h.name} ${h.address||''}`);

    // ─────────────────────────────────────────────────────────────
    // ⚠️ 내장 데이터: 전국 시·도별 종합병원(대표·주요 기관 위주)
    // 필요한 병원은 자유롭게 더 추가 가능
    // ─────────────────────────────────────────────────────────────
    const PRELOADED = [
      // ===== 서울 =====
      {name:"국립중앙의료원", region:"서울", address:"서울 중구 을지로 245", phone:"02-2260-7114", website:"https://www.nmc.or.kr"},
      {name:"서울의료원", region:"서울", address:"서울 중랑구 신내로 156", phone:"02-2276-7000", website:"https://www.seoulmc.or.kr"},
      {name:"서울적십자병원", region:"서울", address:"서울 종로구 새문안로 9", phone:"02-2002-8000", website:"https://www.redcross.or.kr/seoul"},
      {name:"서울특별시 보라매병원", region:"서울", address:"서울 동작구 보라매로5길 20", phone:"02-870-2114", website:"https://www.brmh.org"},
      {name:"서울성심병원(강북)", region:"서울", address:"서울 강북구 도봉로 387", phone:"02-944-5000", website:""},
      {name:"강동경희대학교병원(일반)", region:"서울", address:"서울 강동구 동남로 892", phone:"02-440-7000", website:"https://www.kuh.ac.kr"},
      // ===== 경기 =====
      {name:"분당제생병원", region:"경기", address:"경기 성남시 분당구 서현로 180", phone:"031-779-0114", website:"https://www.dmc.or.kr"},
      {name:"국민건강보험 일산병원", region:"경기", address:"경기 고양시 일산동구 일산로 100", phone:"031-900-0114", website:"https://www.nhimc.or.kr"},
      {name:"명지병원(고양)", region:"경기", address:"경기 고양시 덕양구 화수로14번길 55", phone:"031-810-5114", website:"https://www.mjh.or.kr"},
      {name:"평택성모병원", region:"경기", address:"경기 평택시 중앙로 180", phone:"031-690-8800", website:"https://www.ptsmc.or.kr"},
      {name:"한림대학교동탄성심병원", region:"경기", address:"경기 화성시 큰재봉길 7", phone:"031-8086-3000", website:"https://www.dhmc.or.kr"},
      {name:"의정부성모병원", region:"경기", address:"경기 의정부시 천보로 271", phone:"031-820-3114", website:"https://www.cmcujb.or.kr"},
      // ===== 인천 =====
      {name:"나사렛국제병원", region:"인천", address:"인천 연수구 먼우금로 98", phone:"032-899-9999", website:"https://www.nkhospital.com"},
      {name:"국제성모병원", region:"인천", address:"인천 서구 심곡로100번길 25", phone:"1600-8291", website:"https://www.ish.or.kr"},
      {name:"인천적십자병원", region:"인천", address:"인천 미추홀구 독배로 397", phone:"032-890-1111", website:"https://www.redcross.or.kr/incheon"},
      {name:"가톨릭관동대 인천성모병원 부속 일반병동", region:"인천", address:"인천 부평구 동수로 56", phone:"", website:""},
      // ===== 부산 =====
      {name:"부산성모병원", region:"부산", address:"부산 남구 용호로 232", phone:"051-933-7114", website:"https://www.bsm.or.kr"},
      {name:"메리놀병원", region:"부산", address:"부산 중구 중구로 121", phone:"051-461-8800", website:"https://www.marinol.or.kr"},
      {name:"온종합병원", region:"부산", address:"부산 부산진구 가야대로 721", phone:"051-607-0114", website:"https://www.onhospital.org"},
      {name:"부산보훈병원", region:"부산", address:"부산 연제구 월드컵대로 359", phone:"051-601-6000", website:"https://busan.bohun.or.kr"},
      {name:"좋은문화병원", region:"부산", address:"부산 부산진구 새싹로 12", phone:"051-990-6100", website:"https://www.mizwoman.co.kr"},
      {name:"부민병원(해운대)", region:"부산", address:"부산 해운대구 해운대로 875", phone:"051-602-8000", website:"https://www.bumin.co.kr"},
      {name:"좋은강안병원", region:"부산", address:"부산 수영구 수영로 493", phone:"051-625-0900", website:"https://www.goodghan.com"},
      {name:"부산의료원", region:"부산", address:"부산 연제구 월드컵대로 359", phone:"051-607-2811", website:"https://www.busanmc.or.kr"},
      // ===== 대구 =====
      {name:"대구파티마병원", region:"대구", address:"대구 동구 아양로 99", phone:"053-940-7114", website:"https://www.fatima.or.kr"},
      {name:"대구의료원", region:"대구", address:"대구 서구 평리로 157", phone:"053-560-7575", website:"https://www.dmmc.or.kr"},
      {name:"근로복지공단 대구병원", region:"대구", address:"대구 달서구 월배로 200", phone:"053-790-7000", website:"https://daegu.kcomwel.or.kr"},
      {name:"대구보훈병원", region:"대구", address:"대구 달서구 월곡로 60", phone:"053-630-7000", website:"https://daegu.bohun.or.kr"},
      // ===== 대전 =====
      {name:"대전한국병원", region:"대전", address:"대전 중구 계룡로 171", phone:"042-606-1000", website:"https://www.hkhospital.co.kr"},
      {name:"대전성모병원(일반)", region:"대전", address:"대전 중구 대흥로 64", phone:"042-220-9114", website:"https://www.cmcdejeon.or.kr"},
      {name:"을지대학교병원(대전)", region:"대전", address:"대전 서구 둔산서로 95", phone:"042-611-3000", website:"https://www.emc.ac.kr"},
      // ===== 광주 =====
      {name:"광주기독병원", region:"광주", address:"광주 남구 양림로 37", phone:"062-650-5000", website:"https://www.kch.or.kr"},
      {name:"광주보훈병원", region:"광주", address:"광주 광산구 첨단월봉로 99", phone:"062-602-6114", website:"https://gwangju.bohun.or.kr"},
      {name:"광주일곡병원", region:"광주", address:"광주 북구 일곡마을로 30", phone:"062-608-0000", website:"https://www.ilgogh.co.kr"},
      // ===== 울산 =====
      {name:"동강병원", region:"울산", address:"울산 중구 태화로 239", phone:"052-241-1114", website:"https://www.dkhospital.com"},
      {name:"울산중앙병원", region:"울산", address:"울산 남구 문수로 480", phone:"052-226-1100", website:"https://www.uchealth.co.kr"},
      {name:"울산병원", region:"울산", address:"울산 남구 월평로 171", phone:"052-259-5000", website:"https://www.ulsanhospital.com"},
      {name:"울산제일병원", region:"울산", address:"울산 남구 번영로 390", phone:"052-226-8000", website:"https://www.uuh.co.kr"},
      // ===== 세종 =====
      {name:"세종충남대학교병원(일반)", region:"세종", address:"세종 보듬3로 20", phone:"044-995-4700", website:"https://www.scmc.kr"},
      // ===== 강원 =====
      {name:"강원대학교병원(춘천)", region:"강원", address:"강원 춘천시 백령로 156", phone:"033-258-2000", website:"https://www.knuh.chuncheon.kr"},
      {name:"한림대 춘천성심병원", region:"강원", address:"강원 춘천시 삭주로 77", phone:"033-240-5000", website:"https://www.csch.or.kr"},
      {name:"강원도강릉의료원", region:"강원", address:"강원 강릉시 강릉대로 419", phone:"033-610-1114", website:"https://www.gnmc.or.kr"},
      {name:"영월의료원", region:"강원", address:"강원 영월군 영월읍 중앙로 59", phone:"033-370-9100", website:"https://www.ywmc.or.kr"},
      // ===== 충북 =====
      {name:"청주한국병원", region:"충북", address:"충북 청주시 상당구 상당로 149", phone:"043-222-7000", website:"https://www.koreahosp.co.kr"},
      {name:"충주의료원", region:"충북", address:"충북 충주시 안림로 239", phone:"043-871-0100", website:"https://www.cjmc.or.kr"},
      {name:"제천서울병원", region:"충북", address:"충북 제천시 내토로 1001", phone:"043-640-8000", website:"http://www.seoulhosp.co.kr"},
      // ===== 충남 =====
      {name:"천안충무병원", region:"충남", address:"충남 천안시 서북구 충무로 173", phone:"041-570-5151", website:"https://www.cmhospi.co.kr"},
      {name:"홍성의료원", region:"충남", address:"충남 홍성군 홍성읍 조양로 224", phone:"041-630-6114", website:"https://www.hsmc.or.kr"},
      {name:"서산의료원", region:"충남", address:"충남 서산시 부춘3로 10", phone:"041-689-7000", website:"https://www.ssmc.or.kr"},
      {name:"공주의료원", region:"충남", address:"충남 공주시 무령로 77", phone:"041-962-1111", website:"https://www.gjmc.or.kr"},
      // ===== 전북 =====
      {name:"군산의료원", region:"전북", address:"전북 군산시 의료원로 27", phone:"063-472-5000", website:"https://www.gsmc.or.kr"},
      {name:"전주예수병원", region:"전북", address:"전북 전주시 완산구 서원로 365", phone:"063-230-8000", website:"https://www.jesus.or.kr"},
      {name:"익산병원", region:"전북", address:"전북 익산시 무왕로 969", phone:"063-840-9119", website:"https://www.ih.or.kr"},
      {name:"남원의료원", region:"전북", address:"전북 남원시 충정로 365", phone:"063-620-1200", website:"https://www.nwmc.or.kr"},
      // ===== 전남 =====
      {name:"목포한국병원", region:"전남", address:"전남 목포시 영산로 483", phone:"061-270-5800", website:"https://www.mkhospital.co.kr"},
      {name:"목포중앙병원", region:"전남", address:"전남 목포시 영산로 623", phone:"061-280-3000", website:"https://www.mj-hospital.co.kr"},
      {name:"순천성가롤로병원", region:"전남", address:"전남 순천시 장선배기길 24", phone:"061-720-2000", website:"https://www.sgmc.or.kr"},
      {name:"여수전남병원", region:"전남", address:"전남 여수시 좌수영로 49", phone:"061-640-7000", website:"https://www.jnhospital.or.kr"},
      {name:"광양사랑병원", region:"전남", address:"전남 광양시 공영로 71", phone:"061-797-7000", website:"https://www.gshospital.co.kr"},
      // ===== 경북 =====
      {name:"포항세명기독병원", region:"경북", address:"경북 포항시 남구 새천년대로 351", phone:"054-289-1000", website:"https://www.semyeong.co.kr"},
      {name:"포항성모병원", region:"경북", address:"경북 포항시 남구 대이로 17", phone:"054-272-0151", website:"https://www.pohanghosp.or.kr"},
      {name:"안동의료원", region:"경북", address:"경북 안동시 태사2길 55", phone:"054-850-6000", website:"https://www.admc.or.kr"},
      {name:"김천의료원", region:"경북", address:"경북 김천시 모암길 24", phone:"054-432-8901", website:"https://www.kchm.or.kr"},
      {name:"순천향대학교 구미병원", region:"경북", address:"경북 구미시 1공단로 179", phone:"054-468-9114", website:"https://www.schmc.ac.kr/gumi"},
      // ===== 경남 =====
      {name:"창원파티마병원", region:"경남", address:"경남 창원시 의창구 창이대로 45", phone:"055-270-1000", website:"https://www.cwfatima.or.kr"},
      {name:"한마음창원병원", region:"경남", address:"경남 창원시 성산구 중앙대로 101", phone:"055-267-2000", website:"https://www.hmc.or.kr"},
      {name:"진주고려병원", region:"경남", address:"경남 진주시 동진로 2", phone:"055-751-2500", website:"https://www.goreah.co.kr"},
      {name:"김해중앙병원", region:"경남", address:"경남 김해시 분성로 94", phone:"055-330-6000", website:"https://www.khjh.co.kr"},
      {name:"김해복음병원", region:"경남", address:"경남 김해시 분성로 227", phone:"055-330-3000", website:""},
      {name:"거제대우병원", region:"경남", address:"경남 거제시 계룡로 5길 12", phone:"055-680-8114", website:"https://www.dwhospital.co.kr"},
      {name:"양산웅상중앙병원", region:"경남", address:"경남 양산시 삼호동부로 60", phone:"055-912-1000", website:"https://www.usjh.co.kr"},
      {name:"갑을장유병원", region:"경남", address:"경남 김해시 번화1로 99", phone:"055-310-6000", website:"https://www.kabc.co.kr"},
      // ===== 제주 =====
      {name:"제주대학교병원(일반)", region:"제주", address:"제주 제주시 아란13길 15", phone:"064-717-1114", website:"https://www.jejunuh.co.kr"},
      {name:"제주의료원", region:"제주", address:"제주 제주시 산천단동길 10", phone:"064-754-1100", website:"https://www.jjmc.or.kr"},
      {name:"한라병원", region:"제주", address:"제주 제주시 도령로 65", phone:"064-740-5000", website:"https://www.hallahosp.co.kr"},
      {name:"한국병원(제주)", region:"제주", address:"제주 제주시 서광로 193", phone:"064-750-0000", website:"https://www.hankookhospital.com"}
    ];

    // 상태
    let rawHospitals = [];
    let hospitals = [];
    let excludedCount = 0;

    function renderHospitals(list) {
      const grid = document.getElementById('hospitalsGrid');
      const noResults = document.getElementById('noResults');
      const countsLine = document.getElementById('countsLine');
      const stats = document.getElementById('stats');

      if (!list || list.length === 0) {
        grid.innerHTML = '';
        noResults.style.display = 'block';
        countsLine.textContent = `총 0개 (상급종합 제외됨 ${excludedCount}개)`;
        stats.textContent = `내장 원본: ${rawHospitals.length.toLocaleString()}개 | 렌더링: 0개`;
        return;
      }
      noResults.style.display = 'none';

      grid.innerHTML = list.map(h => {
        const telDigits = toTelDigits(h.phone);
        const hasPhone = telDigits.length > 0;
        const hasWebsite = !!(h.website && h.website !== '#');

        const callBtn = hasPhone
          ? `<a href="tel:${telDigits}" class="action-btn call-btn">📞 전화</a>`
          : `<button class="action-btn call-btn" disabled>📞 전화</button>`;

        const webBtn = hasWebsite
          ? `<a href="${h.website}" target="_blank" rel="noopener" class="action-btn website-btn">🌐 홈페이지</a>`
          : `<button class="action-btn website-btn" disabled>🌐 홈페이지</button>`;

        const mapBtn = `<a href="https://map.naver.com/v5/search/${encodeMapQuery(h)}" target="_blank" rel="noopener" class="action-btn map-btn">🗺️ 지도</a>`;

        return `
          <div class="hospital-card">
            <div class="region-badge">${h.region || '-'}</div>
            <div class="hospital-name">${h.name || '-'}</div>
            <div class="hospital-info">
              <div class="info-item"><span class="info-icon">📍</span><span class="info-text">${h.address||'-'}</span></div>
              <div class="info-item"><span class="info-icon">📞</span><span class="info-text">${h.phone||'-'}</span></div>
            </div>
            <div class="hospital-actions">
              ${callBtn}
              ${webBtn}
              ${mapBtn}
            </div>
          </div>
        `;
      }).join('');

      countsLine.textContent = `총 ${list.length.toLocaleString()}개 (상급종합 제외됨 ${excludedCount.toLocaleString()}개)`;
      stats.textContent = `내장 원본: ${rawHospitals.length.toLocaleString()}개 | 렌더링: ${list.length.toLocaleString()}개`;
    }

    function filterHospitals() {
      const activeRegionBtn = document.querySelector('.filter-btn.active');
      const activeRegion = activeRegionBtn ? activeRegionBtn.dataset.region : 'all';
      const searchTerm = (document.getElementById('searchInput').value || '').toLowerCase().trim();

      const filtered = hospitals.filter(h => {
        const matchesRegion = activeRegion === 'all' || (h.region === activeRegion);
        const text = `${h.name||''} ${(h.address||'')}`.toLowerCase();
        const matchesSearch = !searchTerm || text.includes(searchTerm);
        return matchesRegion && matchesSearch;
      });
      renderHospitals(filtered);
    }

    function applyExclusion(data) {
      const out = []; let ex = 0;
      for (const h of data) {
        if (isTertiary(h.name)) { ex++; continue; }
        out.push(h);
      }
      excludedCount = ex;
      return out;
    }

    // 초기 진입: 내장 데이터 사용
    document.addEventListener('DOMContentLoaded', ()=> {
      rawHospitals = PRELOADED;
      hospitals = applyExclusion(rawHospitals);

      // 지역 버튼 이벤트
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          filterHospitals();
        });
      });
      document.getElementById('searchInput').addEventListener('input', filterHospitals);

      filterHospitals();
    });
  </script>
</body>
</html>
